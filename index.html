<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#10b981">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="manifest" href="manifest.json">
<title>ğŸ’° FINANCE CONTROL ğŸš€</title>

<!-- PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0f0f0f;
  color:#fff;
}
.container{max-width:900px;margin:auto;padding:20px}
h1{color:#10b981;text-align:center}
.dashboard{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:15px;
  margin-bottom:20px;
}
.card{
  background:#1a1a1a;
  border-radius:15px;
  padding:20px;
  border:2px solid #333;
}
.income{border-color:#10b981}
.expense{border-color:#ef4444}
.balance{border-color:#3b82f6}
.value{font-size:28px;font-weight:bold}
.positive{color:#10b981}
.negative{color:#ef4444}

button{
  width:100%;
  padding:15px;
  border:none;
  border-radius:12px;
  font-weight:bold;
  cursor:pointer;
  margin-bottom:10px;
}
.btn-income{background:#10b981;color:#000}
.btn-expense{background:#ef4444;color:#fff}
.btn-pdf{background:#3b82f6;color:#fff}

input,select{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:2px solid #333;
  background:#0f0f0f;
  color:#fff;
  margin-bottom:10px;
}

.list .item{
  background:#0f0f0f;
  border-left:4px solid;
  padding:10px;
  border-radius:10px;
  margin-bottom:10px;
}
.item.income{border-color:#10b981}
.item.expense{border-color:#ef4444}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ’° FINANCE CONTROL ğŸš€</h1>

<div class="dashboard">
  <div class="card income">
    <p>Ganhos do mÃªs</p>
    <div id="totalIncome" class="value positive">R$ 0,00</div>
  </div>
  <div class="card expense">
    <p>Despesas do mÃªs</p>
    <div id="totalExpense" class="value negative">R$ 0,00</div>
  </div>
  <div class="card balance">
    <p>Saldo</p>
    <div id="balance" class="value">R$ 0,00</div>
  </div>
</div>

<button class="btn-income" onclick="addIncome()">ğŸ’š Adicionar Ganho</button>
<button class="btn-expense" onclick="addExpense()">âŒ Adicionar Despesa</button>
<button class="btn-pdf" onclick="generatePDF()">ğŸ“„ Gerar RelatÃ³rio PDF</button>

<div class="card list" id="list"></div>

</div>

<script>
let data = JSON.parse(localStorage.getItem('finance')) || [];

function save(){ localStorage.setItem('finance', JSON.stringify(data)); }

function format(v){
  return v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
}

function addIncome(){
  const desc = prompt('DescriÃ§Ã£o do ganho');
  const val = parseFloat(prompt('Valor').replace(',','.'));
  if(!desc || !val) return;
  data.push({type:'income',desc,val,date:new Date()});
  save(); render();
}

function addExpense(){
  const desc = prompt('DescriÃ§Ã£o da despesa');
  const val = parseFloat(prompt('Valor').replace(',','.'));
  if(!desc || !val) return;
  data.push({type:'expense',desc,val,date:new Date()});
  save(); render();
}

function render(){
  let inc=0, exp=0;
  list.innerHTML='';
  data.forEach(d=>{
    d.type==='income'?inc+=d.val:exp+=d.val;
    const div=document.createElement('div');
    div.className='item '+d.type;
    div.innerHTML=`${d.desc}<br><b>${format(d.val)}</b>`;
    list.appendChild(div);
  });
  totalIncome.textContent=format(inc);
  totalExpense.textContent=format(exp);
  const bal=inc-exp;
  balance.textContent=format(bal);
  balance.className='value '+(bal>=0?'positive':'negative');
}

function generatePDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  let y=15;
  doc.setFontSize(16);
  doc.text('Finance Control - RelatÃ³rio',10,y);
  y+=10;
  doc.setFontSize(12);
  doc.text('Ganhos: '+totalIncome.textContent,10,y); y+=6;
  doc.text('Despesas: '+totalExpense.textContent,10,y); y+=6;
  doc.text('Saldo: '+balance.textContent,10,y); y+=10;

  data.forEach(d=>{
    doc.text(`${d.desc} - ${format(d.val)}`,10,y);
    y+=6;
    if(y>280){doc.addPage();y=10;}
  });

  doc.text('Gerado em: '+new Date().toLocaleDateString(),10,285);
  doc.save('finance-control.pdf');
}

render();

if('serviceWorker' in navigator){
  navigator.serviceWorker.register('sw.js');
}
</script>
</body>
</html>